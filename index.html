<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Typing Game</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.50.1/dist/phaser.js"></script>
</head>

<body>

    <script>
        let words = [
            "happy sunshine day",
            "funny bunny hops",
            "big blue whale",
            "cute kitten purr",
            "green grass grow",
            "bright butterfly",
            "jolly jumping jack",
            "strong silly monkey",
            "friendly firefly glow",
            "silly squirrel scamper",
            "sweet singing bird",
            "gentle giraffe stretch",
            "sparkly starry night",
            "fast flying plane",
            "colorful caterpillar",
            "happy honeybee buzz",
            "bold brave lion",
            "dancing daffodil sway",
            "little ladybug fly",
            "cool crab crawl",
            "shiny smiling sun"
        ];

        let word = "";
        let score = 0;
        let velocity = { x: 150, y: 150 };

        var config = {
            type: Phaser.AUTO,
            width: 960,
            height: 540,
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var game = new Phaser.Game(config);

        function preload() {
            this.load.image("background", "Board.png");

            this.load.audio("type1", "type1.wav");
            this.load.audio("type2", "type2.wav");
            this.load.audio("score_up", "score_up.wav");
            this.load.audio("wrong", "wrong.wav");
            this.load.audio("celebrate", "celebrate.wav");
        }

        function create() {
            newWord();

            this.add.image(480, 270, "background");

            this.wordText = this.add.text(100, 200, word, {
                font: "64px Arial",
                fill: "#ccc"
            });

            this.typingText = this.add.text(100, 200, "", {
                font: "64px Arial",
                fill: "#000"
            })

            this.scoreText = this.add.text(630, 70, "Score: " + score, {
                font: "24px Arial",
                fill: "#222"
            });

            this.type1Sound = this.sound.add("type1");
            this.type2Sound = this.sound.add("type2");
            this.scoreUpSound = this.sound.add("score_up");
            this.wrongSound = this.sound.add("wrong");
            this.celebrateSound = this.sound.add("celebrate");

            this.input.keyboard.on("keydown", keyDown, this);
        }

        function update(time, delta) {
            this.wordText.x += velocity.x * delta / 1000;
            this.wordText.y += velocity.y * delta / 1000;

            if (this.wordText.x < 46 ||
                this.wordText.x + this.wordText.width > game.config.width - 46) {
                velocity.x = -velocity.x;
            }

            if (this.wordText.y < 105 ||
                this.wordText.y + this.wordText.height > game.config.height - 25) {
                velocity.y = -velocity.y;
            }

            this.typingText.x = this.wordText.x;
            this.typingText.y = this.wordText.y;
        }

        function keyDown(event) {
            if (Math.random() < 0.5) {
                this.type1Sound.play();
            } else {
                this.type2Sound.play();
            }

            if (event.key !== word[this.typingText.text.length]) {
                this.wrongSound.play();

                if (score > 0) {
                    score--;
                }

                this.scoreText.text = "Score: " + score;

                newWord();

                this.typingText.text = "";
                this.wordText.text = word;

                return;
            }

            this.typingText.text += event.key;

            if (this.typingText.text === word) {
                score++;

                if (score % 10 == 0) {
                    this.celebrateSound.play();
                } else {
                    this.scoreUpSound.play();
                }

                this.scoreText.text = "Score: " + score;

                newWord();

                this.typingText.text = "";
                this.wordText.text = word;
            }
        }

        function newWord() {
            word = Phaser.Math.RND.pick(words);
        }
    </script>

</body>

</html>